{% extends "index.html" %}
{% import "bootstrap/wtf.html" as wtf %}

<!-- <script type="text/javascript"> -->
<!-- import Chart from 'chart.js'; -->
<!-- <script src="path/to/chartjs/dist/Chart.js"></script> -->
<!-- import Chart from 'chart.js'; -->
{% block title %}Track your Spending{% endblock %}

{% block page_content %}
<!DOCTYPE html>
<html>
  <head>
    <title>JavaScript Bar Chart</title>
    <script src="https://cdn.anychart.com/releases/8.0.0/js/anychart-base.min.js"></script>
  </head>
  <body>
    <div class="page-header">
        <h1>Spending</h1>
    </div>
    <h3>Total Amount:</h3>
    Total Amount total: {{total_overall_value}} <br>
    Total Amount last year: {{default_total_sum}} <br>
    <table>
      <th>email_customer</th>
      <th>date</th>
      <th>price</th>

    {% for line in purchased_ticket %}
      <tr>
      	<td>{{line.email_customer}}</td>
        <td>{{line.date}}</td>
        <td>{{line.price}}</td>
      </tr>
    {% endfor %}

    </table>
    Total Amount last year: {{default_total_sum}} <br>
    <table>
      <th>email_customer</th>
      <th>date</th>
      <th>price</th>

    {% for line in default_total_table %}
      <tr>
      	<td>{{line.email_customer}}</td>
        <td>{{line.date}}</td>
        <td>{{line.price}}</td>
      </tr>
    {% endfor %}
    </table>

    <h3> Try</h3>
    {% for line in default_total_table %}
      {{line.email_customer}} <br>
      {{line.date}} <br>
      {{line.price}} <br>
    {% endfor %}

    Sums={sums} <br>
    Sums={{sums}} <br>
    Sums={{sums[2]}} <br>
    list_of_dates={list_of_dates} <br>
    list_of_dates={{list_of_dates}} <br>

    <var> list_sums = {{sums}} </var>
    <var> l = list_sums.length </var>
    list_sums[2] <br>
    {{sums[2]}} <br>
    var l = {{sums}}.length <br>
    l <br>
    <var> l = {{sums}}.length</var>
    rows_for_graph<br>
    {{str_list_of_dates}}<br>
    {{rows_for_graph}}<br>

    <div id="container" style="width: 100%; height: 100%"></div>
    <script>

      // rows = {{rows_for_graph}};
      rows=json.dumps({{rows_for_graph}})
      // console.log({{rows_for_graph}});
      // problem with rows = [['07']]
      // rows = [['07-2019',1],['09-3021',5]];

      anychart.onDocumentReady(function() {


        // set the data
        var data = {
            rows: rows
          };

        // create the chart
        var chart = anychart.bar();

        // add the data
        chart.data(data);

        // set the chart title
        chart.title("Your Spending");

        // draw
        chart.container("container");
        chart.draw();
      });
    </script>
  </body>
</html>

{% endblock %}
